# HS-Collection

## 1. 需求

### 1.1 概述

- **收集** - 记录卡牌收集情况，支持多种检索方式
- **成就** - 通过上传截图记录达成成就
- **心得** - 存档心得与攻略
- **套牌** - 存档套牌

### 1.2 详细需求

#### 1.2.1 收集

主要记录炉石收集中缺失的卡牌，便于集中查看和管理，可以迅速确定扩展包收集的程度，方便合成卡牌。

主要以图片的形式进行展示，支持添加、修改和删除缺失卡牌，可以根据条件（年度、扩展包、名称、稀有度、收集情况、合成意向）进行检索缺失卡牌。

添加和修改卡牌以模态框的形式。

#### 1.2.2 成就

主要通过上传截图、展示截图的方式来展示成就达成情况，例如5000胜记录点、德鲁伊金色头像获取、一包三橙等情况的截图。截图按照时间顺序排列展示。可支持简单搜索（标签与文本）。

添加和修改成就以模态框形式。另外成就列表页采用缩略图形式，每行展示4-5张，有分页。

#### 1.2.3 心得

类似博客系统，用于发布和存档炉石心得、攻略等。支持富文本编辑。支持简单搜索（标签和文本）。

心得首页是列表形式，有分页，每页20条目。新增、编辑和查看界面均为独立页面。

#### 1.2.4 套牌

主要用于存档套牌。套牌主要包括两部分：套牌代码和套牌截图。套牌可以有“喜欢”功能以及推荐度打分。收集的套牌可以进行编辑删除操作，可以通过检索条件进行检索。

套牌列表页面根据职业分9个标签页。列表条目hover可以预览套牌截图，并且有复制代码的快捷按钮。列表界面有分页。新增和编辑采用模态框的方式。

#### 1.2.5 系统

背景图案可采用官网风格，带视差。

搜索功能提供简单搜索和高级搜索，默认简单搜索，高级搜索可以点击按钮呼出。

空格或点击缩略图可以进行图片预览。

心得列表页可提供瀑布流展示模式（增强功能，后续实现）。

## 2. 设计

### 2.1 模型设计

#### 2.1.1 业务模型

1. 卡牌模型

模型名称：Card
数据库表名：card

|字段名称|字段|类型|说明|
|:--|:--|:--|:--|
|主键|id|String||
|卡牌名称|name|String||
|所属年度|year|int|枚举类型|
|扩展包|expansion|int|枚举类型|
|游戏模式|game_type|int|枚举类型|
|稀有度|rarity|int|枚举类型|
|卡牌归属|cardClass|int|枚举类型|
|卡牌类别|cardType|int|枚举类型|
|收集情况|count|int|0-2之间|
|合成意向|intention|int|枚举类型|
|卡牌图片|url|String|图片存储位置|

2. 成就模型

所需字段：名称、成就截图、成就标签（如开包、排位等，枚举）

3. 心得模型

所需字段：名称、内容、标签（天梯、竞技场）

4. 套牌模型

所需字段：套牌名称、套牌代码、套牌截图、年度信息、标准/狂野标记、职业类别、是否喜欢、推荐度分数

5. 枚举类型

- 所属年度：YEAR

|枚举字段|枚举名称|枚举值|说明|
|:--|:--|:--|:--|
|ANCIENT|史前|0|海怪年之前|
|MONSTAER|海怪年|1|2016.4-2017.3|
|MAMMOTH|猛犸年|2|2017.4-2018.3|
|RAVEN|渡鸦年|3|2018.4-2019.3|

- 扩展包：EXPANSION

|枚举字段|枚举名称|枚举值|说明|
|:--|:--|:--|:--|
|CLASSIC|经典|0|2014.3|
||纳克萨玛斯|1|2014.7|
||地精大战侏儒|2|2014.11|
||黑石山的火焰|3|2015.4|
||冠军的试炼|4|2015.8|
||探险者协会|5|2015.12|
||上古之神的低语|6|2016.4|
||卡拉赞之夜|7|2016.8|
||龙争虎斗加基森|8|2016.12|
||勇闯安戈洛|9|2017.4|
||冰封王座的骑士|10|2017.8|
||狗头人与地下世界|11|2017.12|

- 游戏模式: GAMETYPE

|枚举字段|枚举名称|枚举值|说明|
|:--|:--|:--|:--|
|STANDARD|标准|0||
|WILD|狂野|1||

#### 2.1.2 系统模型

### 2.2 API设计

## 3. 技术栈

本工程拟全部采用Javascript语言开发。

- DB: MongoDB
- Server End: Koa.js
- Front End: Vue.js + ElementUI